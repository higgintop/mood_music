#!/usr/bin/env ruby

require 'highline/import'
Dir["./app/**/*.rb"].each {|f| require f}
Dir["./lib/**/*.rb"].each {|f| require f}


def print_error_message
  puts "[Help] Run as: ./mood_music manage"
end

def list_recommendations
  say("No recommendations found.\n")
end

def list_mood_categories
  choose do |sub_menu|
    sub_menu.prompt=""
    recommendations_controller = RecommendationsController.new
    puts "What category would you like to see?"
    sub_menu.choice('happy') {say(recommendations_controller.index)}
    sub_menu.choice('sad') {say(recommendations_controller.index)}
    sub_menu.choice('mellow') {say(recommendations_controller.index)}
    sub_menu.choice('angry') {say(recommendations_controller.index)}
  end
end

if ARGV.size == 1 and ARGV[0] == 'manage'
  loop do
    choose do |menu|
      menu.prompt = ""
      menu.choice('Add song recommendation') {say("What is the song's title?")}
      menu.choice('List song recommendations') do 
        list_mood_categories
        exit
      end
      menu.choice('Exit') do
        say ("Peace Out!")
        exit
      end
     end
  end
elsif ARGV.size == 1 and ARGV[0] == 'recommend'
  puts "What is your mood today?"
  choose do |menu|
    menu.prompt = ""
    menu.choice('happy') {say("so youre happy")}
    menu.choice('sad') {say("so youre sad")}
    menu.choice('mellow') {say ("so youre mellow")}
    menu.choice('angry') {say ("so youre angry")}
  end
else
  print_error_message
end
